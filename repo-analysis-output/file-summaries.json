{
  "schema_version": "2.0",
  "total_files": 12,
  "files": [
    {
      "schema_version": "2.0",
      "path": "planner_service/__init__.py",
      "language": "Python",
      "role": "module-init",
      "role_justification": "module initialization file '__init__'",
      "metrics": {
        "size_bytes": 1000,
        "loc": 2,
        "todo_count": 0
      },
      "structure": {
        "declarations": []
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [],
          "third-party": []
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "planner_service/api.py",
      "language": "Python",
      "role": "api",
      "role_justification": "filename contains 'api'",
      "metrics": {
        "size_bytes": 12532,
        "loc": 297,
        "todo_count": 0,
        "declaration_count": 8
      },
      "structure": {
        "declarations": [
          "async function lifespan",
          "async function http_exception_handler",
          "async function validation_exception_handler",
          "async function health_check",
          "async function healthz",
          "async function create_plan",
          "function _verify_debug_auth",
          "async function debug_context"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "contextlib.asynccontextmanager",
            "os",
            "typing.AsyncGenerator",
            "uuid.UUID",
            "uuid.uuid4"
          ],
          "third-party": [
            "fastapi.Depends",
            "fastapi.FastAPI",
            "fastapi.HTTPException",
            "fastapi.Header",
            "fastapi.Request",
            "fastapi.exceptions.RequestValidationError",
            "fastapi.responses.JSONResponse"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "planner_service/auth.py",
      "language": "Python",
      "role": "implementation",
      "role_justification": "general implementation file (default classification)",
      "metrics": {
        "size_bytes": 2772,
        "loc": 38,
        "todo_count": 0,
        "declaration_count": 2
      },
      "structure": {
        "declarations": [
          "class AuthContext",
          "function get_current_user"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "typing.Optional"
          ],
          "third-party": [
            "fastapi.Header",
            "pydantic.BaseModel",
            "pydantic.Field"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "planner_service/context_driver.py",
      "language": "Python",
      "role": "implementation",
      "role_justification": "general implementation file (default classification)",
      "metrics": {
        "size_bytes": 4961,
        "loc": 97,
        "todo_count": 0,
        "declaration_count": 3
      },
      "structure": {
        "declarations": [
          "class ContextDriver",
          "class StubContextDriver",
          "function get_context_driver"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "importlib.resources",
            "json",
            "typing.Protocol",
            "typing.runtime_checkable"
          ],
          "third-party": [
            "af_github_core.GitHubContextDriver"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "planner_service/logging.py",
      "language": "Python",
      "role": "implementation",
      "role_justification": "general implementation file (default classification)",
      "metrics": {
        "size_bytes": 3190,
        "loc": 57,
        "todo_count": 0,
        "declaration_count": 3
      },
      "structure": {
        "declarations": [
          "function get_log_level",
          "function configure_logging",
          "function get_logger"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "logging",
            "os",
            "sys"
          ],
          "third-party": [
            "structlog"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "planner_service/models.py",
      "language": "Python",
      "role": "model",
      "role_justification": "model/schema name 'models'",
      "metrics": {
        "size_bytes": 4324,
        "loc": 81,
        "todo_count": 0,
        "declaration_count": 10
      },
      "structure": {
        "declarations": [
          "class RepositoryPointer",
          "class UserInput",
          "class ProjectContext",
          "class PlanningContext",
          "class PlanRequest",
          "class PlanStep",
          "class PlanResponse",
          "class ErrorDetail",
          "class ErrorResponse",
          "class HealthResponse"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "typing.Optional",
            "uuid.UUID"
          ],
          "third-party": [
            "pydantic.BaseModel",
            "pydantic.Field"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "planner_service/prompt_engine.py",
      "language": "Python",
      "role": "implementation",
      "role_justification": "general implementation file (default classification)",
      "metrics": {
        "size_bytes": 4807,
        "loc": 87,
        "todo_count": 0,
        "declaration_count": 3
      },
      "structure": {
        "declarations": [
          "class PromptEngine",
          "class StubPromptEngine",
          "function get_prompt_engine"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "typing.Protocol",
            "typing.runtime_checkable",
            "uuid.uuid4"
          ],
          "third-party": [
            "af_prompt_core.PromptEngineBackend"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "tests/__init__.py",
      "language": "Python",
      "role": "test",
      "role_justification": "located in 'tests' directory",
      "metrics": {
        "size_bytes": 947,
        "loc": 1,
        "todo_count": 0
      },
      "structure": {
        "declarations": []
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [],
          "third-party": []
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "tests/test_app.py",
      "language": "Python",
      "role": "test",
      "role_justification": "filename starts with 'test_'",
      "metrics": {
        "size_bytes": 7169,
        "loc": 154,
        "todo_count": 0,
        "declaration_count": 6
      },
      "structure": {
        "declarations": [
          "function client",
          "class TestHealthEndpoint",
          "class TestPlanEndpoint",
          "class TestModels",
          "class TestAppInitialization",
          "class TestLogging"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "uuid.UUID",
            "uuid.uuid4"
          ],
          "third-party": [
            "fastapi.testclient.TestClient",
            "pytest"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "tests/test_context_driver.py",
      "language": "Python",
      "role": "test",
      "role_justification": "filename starts with 'test_'",
      "metrics": {
        "size_bytes": 10863,
        "loc": 196,
        "todo_count": 0,
        "declaration_count": 5
      },
      "structure": {
        "declarations": [
          "function client",
          "class TestContextDriverProtocol",
          "class TestStubContextDriver",
          "class TestGetContextDriverFactory",
          "class TestDebugContextEndpoint"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "builtins",
            "sys",
            "unittest.mock.MagicMock",
            "unittest.mock.patch"
          ],
          "third-party": [
            "fastapi.testclient.TestClient",
            "pytest"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "tests/test_plan_endpoint.py",
      "language": "Python",
      "role": "test",
      "role_justification": "filename starts with 'test_'",
      "metrics": {
        "size_bytes": 13591,
        "loc": 270,
        "todo_count": 0,
        "declaration_count": 9
      },
      "structure": {
        "declarations": [
          "function client",
          "class TestPlanEndpointAuth",
          "class TestPlanEndpointHappyPath",
          "class TestPlanEndpointContextDriverFailure",
          "class TestPlanEndpointPromptEngineFailure",
          "class TestPlanEndpointValidation",
          "class TestHealthEndpoints",
          "class TestAuthContextModel",
          "class TestGetCurrentUserDependency"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "unittest.mock.MagicMock",
            "unittest.mock.patch",
            "uuid.UUID"
          ],
          "third-party": [
            "fastapi.testclient.TestClient",
            "pytest"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "tests/test_prompt_engine.py",
      "language": "Python",
      "role": "test",
      "role_justification": "filename starts with 'test_'",
      "metrics": {
        "size_bytes": 10430,
        "loc": 211,
        "todo_count": 0,
        "declaration_count": 5
      },
      "structure": {
        "declarations": [
          "function sample_planning_context",
          "class TestPromptEngineProtocol",
          "class TestStubPromptEngine",
          "class TestGetPromptEngineFactory",
          "class TestMultipleProjectContextHandling"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "builtins",
            "unittest.mock.MagicMock",
            "unittest.mock.patch"
          ],
          "third-party": [
            "pytest"
          ]
        }
      }
    }
  ]
}